<!DOCTYPE HTML>
<html lang="zh-CN" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>管理文件 - Anki 手册</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Anki 的用户手册。Anki 是一款让学习更容易的抽认卡程序。">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="css/misc.css">
        <link rel="stylesheet" href="css/kbd.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="intro.html">介绍</a></li><li class="chapter-item "><a href="background.html"><strong aria-hidden="true">1.</strong> 背景</a></li><li class="chapter-item "><a href="platform/intro.html"><strong aria-hidden="true">2.</strong> 平台说明</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/windows/intro.html"><strong aria-hidden="true">2.1.</strong> Windows</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/windows/installing.html"><strong aria-hidden="true">2.1.1.</strong> 安装与升级</a></li><li class="chapter-item "><a href="platform/windows/installation-issues.html"><strong aria-hidden="true">2.1.2.</strong> 安装问题</a></li><li class="chapter-item "><a href="platform/windows/startup-issues.html"><strong aria-hidden="true">2.1.3.</strong> 启动问题</a></li><li class="chapter-item "><a href="platform/windows/display-issues.html"><strong aria-hidden="true">2.1.4.</strong> 显示问题</a></li><li class="chapter-item "><a href="platform/windows/copy-and-paste.html"><strong aria-hidden="true">2.1.5.</strong> 复制和粘贴问题</a></li><li class="chapter-item "><a href="platform/windows/text-size.html"><strong aria-hidden="true">2.1.6.</strong> 文字大小</a></li><li class="chapter-item "><a href="platform/windows/permission-problems.html"><strong aria-hidden="true">2.1.7.</strong> 权限问题</a></li></ol></li><li class="chapter-item "><a href="platform/mac/intro.html"><strong aria-hidden="true">2.2.</strong> macOS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/mac/installing.html"><strong aria-hidden="true">2.2.1.</strong> 安装与升级</a></li><li class="chapter-item "><a href="platform/mac/display-issues.html"><strong aria-hidden="true">2.2.2.</strong> 显示问题</a></li></ol></li><li class="chapter-item "><a href="platform/linux/intro.html"><strong aria-hidden="true">2.3.</strong> Linux</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="platform/linux/installing.html"><strong aria-hidden="true">2.3.1.</strong> 安装与升级</a></li><li class="chapter-item "><a href="platform/linux/missing-libraries.html"><strong aria-hidden="true">2.3.2.</strong> 缺少的库</a></li><li class="chapter-item "><a href="platform/linux/display-issues.html"><strong aria-hidden="true">2.3.3.</strong> 显示问题</a></li><li class="chapter-item "><a href="platform/linux/blank-window.html"><strong aria-hidden="true">2.3.4.</strong> 空白主窗口</a></li><li class="chapter-item "><a href="platform/linux/distro-packages.html"><strong aria-hidden="true">2.3.5.</strong> Linux 发行版包</a></li><li class="chapter-item "><a href="platform/linux/gtk-theme.html"><strong aria-hidden="true">2.3.6.</strong> 错误的 GTK 主题</a></li><li class="chapter-item "><a href="platform/linux/wayland.html"><strong aria-hidden="true">2.3.7.</strong> Wayland</a></li><li class="chapter-item "><a href="platform/linux/input-methods.html"><strong aria-hidden="true">2.3.8.</strong> 输入法</a></li></ol></li></ol></li><li class="chapter-item "><a href="getting-started.html"><strong aria-hidden="true">3.</strong> 入门</a></li><li class="chapter-item "><a href="getting-help.html"><strong aria-hidden="true">4.</strong> 获取帮助</a></li><li class="chapter-item "><a href="studying.html"><strong aria-hidden="true">5.</strong> 学习</a></li><li class="chapter-item "><a href="editing.html"><strong aria-hidden="true">6.</strong> 添加/编辑</a></li><li class="chapter-item "><a href="templates/intro.html"><strong aria-hidden="true">7.</strong> 卡片模板</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="templates/fields.html"><strong aria-hidden="true">7.1.</strong> 字段替换</a></li><li class="chapter-item "><a href="templates/generation.html"><strong aria-hidden="true">7.2.</strong> 卡片生成</a></li><li class="chapter-item "><a href="templates/styling.html"><strong aria-hidden="true">7.3.</strong> 样式与 HTML</a></li><li class="chapter-item "><a href="templates/errors.html"><strong aria-hidden="true">7.4.</strong> 检查和错误</a></li></ol></li><li class="chapter-item "><a href="preferences.html"><strong aria-hidden="true">8.</strong> 首选项</a></li><li class="chapter-item "><a href="deck-options.html"><strong aria-hidden="true">9.</strong> 牌组选项</a></li><li class="chapter-item "><a href="syncing.html"><strong aria-hidden="true">10.</strong> 与 AnkiWeb 同步</a></li><li class="chapter-item "><a href="profiles.html"><strong aria-hidden="true">11.</strong> 用户档案</a></li><li class="chapter-item "><a href="browsing.html"><strong aria-hidden="true">12.</strong> 浏览</a></li><li class="chapter-item "><a href="filtered-decks.html"><strong aria-hidden="true">13.</strong> 筛选牌组</a></li><li class="chapter-item "><a href="searching.html"><strong aria-hidden="true">14.</strong> 搜索</a></li><li class="chapter-item "><a href="importing/intro.html"><strong aria-hidden="true">15.</strong> 导入</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="importing/text-files.html"><strong aria-hidden="true">15.1.</strong> 文本文件</a></li><li class="chapter-item "><a href="importing/打包牌组.html"><strong aria-hidden="true">15.2.</strong> 打包牌组</a></li></ol></li><li class="chapter-item "><a href="exporting.html"><strong aria-hidden="true">16.</strong> 导出</a></li><li class="chapter-item "><a href="backups.html"><strong aria-hidden="true">17.</strong> 备份</a></li><li class="chapter-item expanded "><a href="files.html" class="active"><strong aria-hidden="true">18.</strong> 管理文件</a></li><li class="chapter-item "><a href="stats.html"><strong aria-hidden="true">19.</strong> 统计</a></li><li class="chapter-item "><a href="media.html"><strong aria-hidden="true">20.</strong> 媒体</a></li><li class="chapter-item "><a href="math.html"><strong aria-hidden="true">21.</strong> 数学与符号</a></li><li class="chapter-item "><a href="leeches.html"><strong aria-hidden="true">22.</strong> 记忆难点</a></li><li class="chapter-item "><a href="addons.html"><strong aria-hidden="true">23.</strong> 插件</a></li><li class="chapter-item "><a href="troubleshooting.html"><strong aria-hidden="true">24.</strong> 故障排除</a></li><li class="chapter-item "><a href="sync-server.html"><strong aria-hidden="true">25.</strong> 同步服务器</a></li><li class="chapter-item "><a href="misc.html"><strong aria-hidden="true">26.</strong> 其他</a></li><li class="chapter-item affix "><a href="contrib.html">贡献</a></li><li class="chapter-item affix "><a href="faqs.html">常见问题</a></li><li class="chapter-item affix "><a href="resources.html">资源</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anki 手册</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/L-M-Sherlock/anki-manual-zh-CN" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="管理文件和你的集合"><a class="header" href="#管理文件和你的集合">管理文件和你的集合</a></h1>
<blockquote>
<p>原文：<a href="https://docs.ankiweb.net/files.html">Managing Files - Anki Manual (ankiweb.net)</a></p>
</blockquote>
<ul>
<li><a href="#%E6%A3%80%E6%9F%A5%E4%BD%A0%E7%9A%84%E9%9B%86%E5%90%88">检查你的集合</a></li>
<li><a href="#%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE">文件位置</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8%E9%80%89%E9%A1%B9">启动选项</a></li>
<li><a href="#dropbox-%E5%92%8C%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5">DropBox 和文件同步</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">网络文件系统</a></li>
<li><a href="#%E4%BB%8E%E9%97%AA%E5%AD%98%E9%A9%B1%E5%8A%A8%E5%99%A8%E8%BF%90%E8%A1%8C">从闪存驱动器运行</a></li>
<li><a href="#%E5%A4%87%E4%BB%BD">备份</a></li>
<li><a href="#%E7%A1%AC%E7%9B%98%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE">硬盘无法访问</a></li>
<li><a href="#%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9D%83%E9%99%90">临时文件夹权限</a></li>
<li><a href="#%E6%8D%9F%E5%9D%8F%E7%9A%84%E9%9B%86%E5%90%88">损坏的集合</a>
<ul>
<li><a href="#linuxmacos">Linux/macOS</a></li>
<li><a href="#windows">Windows</a></li>
<li><a href="#%E6%9C%80%E5%90%8E%E4%B8%80%E6%AD%A5">最后一步</a></li>
</ul>
</li>
</ul>
<h2 id="检查你的集合"><a class="header" href="#检查你的集合">检查你的集合</a></h2>
<p>偶尔检查一下你的集合文件是否有问题是个好主意。你可以通过工具菜单中的检查数据库项来执行这项操作。检查
数据库可以确保文件没有损坏，重建一些内部结构，并优化文件。</p>
<p>当你检查数据库时，你的标签列表也会被重建。当你删除单个牌组或卡片时，Anki 不会更新使用过的标签列表，
因为这样做效率不高。如果你想清除列表中不再使用的旧标签，检查数据库是实现这一目的的办法。</p>
<p>请注意，Anki 每两周会自动优化你的集合。这种优化可以确保集合的良好性能，但是在自动优化时并不会检查错
误或重建标签列表。</p>
<h2 id="文件位置"><a class="header" href="#文件位置">文件位置</a></h2>
<p>在 <strong>Windows</strong> 上，最新版的 Anki 会将你的 Anki 文件储存在应用数据文件夹中。你可以通过打开文件管理
器，并在位置字段中输入 <code>%APPDATA%\Anki2</code> 来访问它。旧版本的 Anki 将你的 Anki 文件储存在 <code>Documents</code>
文件夹中的一个名为 <code>Anki</code> 的文件夹中。</p>
<p>在 <strong>Mac</strong> 电脑上，最近的 Anki 版本将所有文件储存在 <code>~/Library/Application Support/Anki2</code> 文件夹中。
该文件夹默认是隐藏的，但可以通过在 Finder 中按住 option 键并点击前往菜单来显示。如果你使用的是旧版
Anki，你的 Anki 文件会在 <code>Documents/Anki</code> 文件夹中。</p>
<p>在 <strong>Linux</strong> 上，最近的 Anki 版本会将数据储存在 <code>~/.local/share/Anki2</code> 中，或者如果你设置了自定义数
据路径，则储存在 <code>$XDG_DATA_HOME/Anki2</code> 中。旧版本的 Anki 会将文件储存在 <code>~/Documents/Anki</code> 或
<code>~/Anki</code> 中。</p>
<p>在 Anki 文件夹中，会有程序级别和配置文件级别的首选项储存在一个名为 prefs.db 的文件中。</p>
<p>每个配置文件都有一个单独的文件夹。该文件夹包含：</p>
<ul>
<li>
<p>你的笔记、牌组、卡片等数据保存在名为 collection.anki2 的文件中</p>
</li>
<li>
<p>你的音频和图像保存在 collection.media 文件夹中</p>
</li>
<li>
<p>一个备份文件夹</p>
</li>
<li>
<p>一些系统文件</p>
</li>
</ul>
<p>你不应该在 Anki 打开的情况下复制或移动你的集合。这样做可能会导致你的集合损坏。请也不要移动或修改文件
夹中的其他文件。</p>
<h2 id="启动选项"><a class="header" href="#启动选项">启动选项</a></h2>
<p>如果你在一台电脑上进行了破坏性的更改，而在另一台电脑上有未损坏的副本，你可能希望在不进行同步的情况下
启动 Anki，以便使用完整的同步选项而不需要先下载更改。同样地，如果你在使用 Anki 时遇到问题，你可能希
望（或被指示）暂时禁用插件，以查看是否有插件导致了问题。你可以在启动 Anki 时按住 <kbd>Shift</kbd> 键
来执行这两个操作。</p>
<p>在启动期间指定自定义文件夹位置是可能的。这是一个主要用于便携安装的高级功能，我们建议你在大多数情况下
使用默认位置。</p>
<p>指定备用文件夹的语法如下：</p>
<pre><code>anki -b /path/to/anki/folder
</code></pre>
<ul>
<li>
<p>如果你有多个配置文件，你可以传递 -p &lt;name&gt; 来加载一个特定的配置文件。</p>
</li>
<li>
<p>如果你传递 -p some-fake-name，Anki 将在启动时显示配置文件屏幕。如果没有提供配置文件，将加载最后使
用的配置文件。</p>
</li>
<li>
<p>要更改界面语言，请使用 -l &lt;iso 639-1 language code&gt;，例如 &quot;-l ja&quot; 表示日语。</p>
</li>
</ul>
<p>如果你总是想使用自定义文件夹位置，你可以修改 Anki 的快捷方式。在 Windows 上，右键点击快捷方式，选择
属性，选择快捷方式选项卡，然后在程序路径后添加 &quot;-b \path\to\data\folder&quot;，这样应该会给你类似于</p>
<pre><code>&quot;C:\Program Files\Anki\anki.exe&quot; -b &quot;C:\AnkiDataFolder&quot;
</code></pre>
<p>的结果。</p>
<p>你也可以将这种技术与 -l 选项结合使用，以便轻松在不同语言中使用 Anki。</p>
<p>在 Windows 上，应使用反斜杠 (\) 而不是正斜杠 (/)。</p>
<p>在 Mac 上，没有简单的方法来在点击 Anki 图标时改变行为，但可以从终端启动 Anki 并使用自定义基文件夹：</p>
<pre><code>open /Applications/Anki.app --args -b ~/myankifolder
</code></pre>
<p>另一种方法是定义环境变量 &quot;ANKI_BASE&quot;。在 Windows 上，你可以定义这个环境变量如下：</p>
<pre><code>set &quot;ANKI_BASE=C:/path/to/AnkiDataFolder&quot;
</code></pre>
<p>在 Linux 和 macOS 上，你可以使用：</p>
<pre><code>export ANKI_BASE=&quot;/path/to/AnkiDataFolder&quot;
</code></pre>
<h2 id="dropbox-和文件同步"><a class="header" href="#dropbox-和文件同步">DropBox 和文件同步</a></h2>
<p>我们不建议你直接使用第三方同步服务同步你的 Anki 文件夹，因为在文件使用中进行同步会导致数据库损坏。</p>
<p>如果你只是想同步媒体，可以将外部文件夹链接到像 DropBox 这样的服务中。请参阅 [DropboxWiki：同步
Dropbox 以外的文件夹
(archive.org)][http://web.archive.org/web/20180919153730/http://www.dropboxwiki.com/tips-and-tricks/sync-other-folders]
了解更多信息。</p>
<p>如果你还希望保持集合同步，强烈建议你创建一个脚本，将文件从同步文件夹复制到本地文件夹，启动 Anki，然
后在 Anki 关闭后将文件复制回去。这样可以确保文件在打开时不会被同步。</p>
<h2 id="网络文件系统"><a class="header" href="#网络文件系统">网络文件系统</a></h2>
<p>我们强烈建议你将 Anki 文件存储在本地硬盘上，因为网络文件系统可能导致数据库损坏。如果网络文件系统是你
唯一的选择，建议经常使用工具菜单中的检查数据库来检测损坏。</p>
<h2 id="从闪存驱动器运行"><a class="header" href="#从闪存驱动器运行">从闪存驱动器运行</a></h2>
<p>在 Windows 上，Anki 可以安装在 USB / 闪存驱动器上，并作为便携应用程序运行。下面的示例假设你的 USB 驱
动器是 G 盘。</p>
<ul>
<li>
<p>将 \Program Files\Anki 文件夹复制到闪存驱动器，这样你会有一个像 G:\Anki 的文件夹。</p>
</li>
<li>
<p>创建一个名为 G:\anki.bat 的文本文件，包含以下文本：</p>
<p>g:\anki\anki.exe -b g:\ankidata</p>
</li>
</ul>
<p>如果你希望防止黑色命令提示窗口保持打开状态，你可以改用以下命令：</p>
<pre><code>start /b g:\anki\anki.exe -b g:\ankidata
</code></pre>
<ul>
<li>双击 anki.bat 应该会启动 Anki，并将用户数据存储在 G:\ankidata 中。</li>
</ul>
<p>需要完整路径，包括驱动器号 - 如果你尝试使用 <code>\anki\anki.exe</code> 进行同步，它将无法工作。</p>
<p>如果你的闪存驱动器格式为 FAT32，AnkiWeb 上的媒体同步可能不起作用。请将驱动器格式化为 NTFS 以确保媒体
能正确同步。</p>
<h2 id="备份"><a class="header" href="#备份">备份</a></h2>
<p>请参阅<a href="./backups.html">本节</a>。</p>
<h2 id="硬盘无法访问"><a class="header" href="#硬盘无法访问">硬盘无法访问</a></h2>
<p>如果 Anki 无法写入 <a href="#%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE">Anki 文件夹</a>中的文件，启动时会显示一条消息，表示 Anki 无法写入硬盘，
并将关闭。如果你不确定如何修复权限，请联系对计算机有知识的人来帮你。</p>
<h2 id="临时文件夹权限"><a class="header" href="#临时文件夹权限">临时文件夹权限</a></h2>
<p>Anki 使用系统的临时文件夹来存储临时数据。如果该文件夹的权限被恶意应用或有缺陷的杀毒软件更改过，Anki
将无法正常运行。</p>
<p>如果你在 Windows 7 机器上，解决问题的一般步骤如下。由于这有些复杂，如果你不确定，请询问对 Windows 知
识丰富的人。</p>
<ol>
<li>
<p>点击开始栏，输入 %temp%（包括百分号），然后按 <kbd>回车</kbd>。</p>
</li>
<li>
<p>返回上一文件夹，定位到 temp 文件夹。右键点击它，然后选择属性。</p>
</li>
<li>
<p>在安全选项卡中，点击高级。</p>
</li>
<li>
<p>点击所有者选项卡。如果你不是所有者，点击按钮获取所有权。</p>
</li>
<li>
<p>在权限选项卡，确保你有完全控制权限。在默认的 W7 安装中，控制实际上是由 c:\users\your-username
继承的。</p>
</li>
</ol>
<h2 id="损坏的集合"><a class="header" href="#损坏的集合">损坏的集合</a></h2>
<p>Anki 使用一个防止程序和计算机崩溃的文件格式，但如果在 Anki 开启时修改了文件、文件储存在网络驱动器上
或被 bug 损坏，集合仍有可能损坏。</p>
<p>当你运行工具菜单中的检查数据库时，如果 Anki 检测文件已损坏，将会收到一条消息。<strong>恢复的最佳方法是从最
近的<a href="#%E5%A4%87%E4%BB%BD">自动备份</a>中恢复</strong>，但如果你的备份太旧，可以尝试修复损坏。</p>
<p>在 Linux 上，确保安装了 sqlite3。在 Mac 上，它应该已经安装。在 Windows 上，下载
<a href="http://www.sqlite.org/sqlite-3_6_23.zip">http://www.sqlite.org/sqlite-3_6_23.zip</a>。</p>
<p>接下来，备份你的 collection.anki2 文件，以防下面的操作出现问题。</p>
<h3 id="linuxmacos"><a class="header" href="#linuxmacos">Linux/macOS</a></h3>
<p>打开终端，切换到集合所在的文件夹，并输入：</p>
<pre><code>sqlite3 collection.anki2 .dump &gt; dump.txt
</code></pre>
<p>在文本编辑器中打开生成的 dump.txt 文件，查看最后一行。如果显示「rollback;」，将其更改为「commit;」。</p>
<p>然后在终端中运行以下命令：</p>
<pre><code>cat dump.txt | sqlite3 temp.file
</code></pre>
<p>确保使用 temp.file - 不要在右侧放置 collection.anki2，否则将覆盖文件。完成后，继续进行最后一步。</p>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<p>将 <code>sqlite3.exe</code> 程序和你的牌组复制到桌面上。然后进入 <strong>Start&gt;Run</strong>，输入 <code>cmd.exe</code>。</p>
<p>如果你使用的是较新的 Windows，命令提示符可能不会在桌面上启动。如果在命令提示符中没有看到桌面，输入如
下内容，将 &quot;administrator&quot; 替换为你的登录名。</p>
<pre><code>cd C:\Users\Administrator\Desktop
</code></pre>
<p>然后输入：</p>
<pre><code>sqlite3 collection.anki2 .dump &gt; dump.txt
</code></pre>
<p>在文本编辑器中打开生成的 dump.txt 文件，查看最后一行。如果显示「rollback;」，将其更改为「commit;」。</p>
<p>然后在终端中运行以下命令：</p>
<pre><code>type dump.txt | sqlite3 temp.file
</code></pre>
<p>确保使用 temp.file - 不要在右侧放置 collection.anki2，否则将覆盖文件。完成后，继续进行最后一步。</p>
<h3 id="最后一步"><a class="header" href="#最后一步">最后一步</a></h3>
<p>检查是否没有收到错误信息，并且 temp.file 不是空的。此过程在优化集合过程中是正常的，因此新文件通常会
比旧文件小一些。</p>
<p>在确认文件不为空后：</p>
<ul>
<li>
<p>将原始的 collection.anki2 文件重命名为其他名称</p>
</li>
<li>
<p>将 temp.file 重命名为 collection.anki2</p>
</li>
<li>
<p>将 collection.anki2 移回到你的集合文件夹中，覆盖旧版本</p>
</li>
<li>
<p>启动 Anki 并进入工具菜单中的检查数据库，以确保集合已成功恢复。</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="backups.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="stats.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="backups.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="stats.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
